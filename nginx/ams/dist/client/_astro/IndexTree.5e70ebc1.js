import{B as k}from"./btn-close.7e5f4a6c.js";import{_ as b}from"./_plugin-vue_export-helper.c27b6911.js";import{U as g,o,c as l,F as x,r as h,b as n,t as B,V as S,W as y,X as i,Y as T,Z as _,_ as O,x as V}from"./runtime-core.esm-bundler.82a956ae.js";import{o as C,a as w}from"./index.5d0abe74.js";const M="/images/btn/btn-indextree.svg",j={__name:"IndexTreeCard",props:{indexes:Object},setup(c,{expose:s}){s();const e={props:c};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},F={class:"index-tree__items"},z={class:"index-tree__detail"};function E(c,s,a,e,d,u){const t=g("IndexTreeCard",!0);return o(),l("ul",null,[(o(!0),l(x,null,h(a.indexes.children,r=>(o(),l("li",{key:r.id},[n("details",F,[n("summary",null,B(r.name),1),n("div",z,[r.children?(o(),S(t,{key:0,indexes:r},null,8,["indexes"])):y("",!0)])])]))),128))])}const N=b(j,[["render",E]]),K={__name:"IndexTree",setup(c,{expose:s}){s();const a=[],e=i(!1),d=i(!1),u=i(null),t=()=>{window.innerWidth>768&&window.scrollY>=140?e.value=!0:e.value=!1},r=()=>{e.value=!0,d.value=!0,f()},p=()=>{d.value=!1,t()};T(()=>{window.addEventListener("scroll",t)}),C("Escape",v=>{p()}),w(u,()=>{onClose()});const m=i([]),f=async()=>{const v=await fetch("https://ams-dev.ir.rcos.nii.ac.jp/api/v1.0/tree/index/0");m.value=await v.json()},I={stabMenu:a,isIndexTreeBtnViewFlg:e,isIndexTreeModalShow:d,IndexTreeRef:u,handleIndexValue:t,onOpenIndexTree:r,onCloseIndexTree:p,allItems:m,loadIndexTree:f,get ButtonClose(){return k},get ButtonIndex(){return M},IndexTreeCard:N,defineComponent:O,onMounted:T,get onKeyStroke(){return C},get onClickOutside(){return w},ref:i};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}},L=["src"],P={class:"wrapper"},W=n("div",{class:"backdrop"},null,-1),Y=["src"];function $(c,s,a,e,d,u){return o(),l(x,null,[n("dialog",{id:"IndexTreeContent",class:_([e.isIndexTreeModalShow?"visible z-5 relative is-open":"invisible"])},[n("div",{class:_(["modal-left",[e.isIndexTreeModalShow?"is-open":""]])},[n("button",{class:"btn-close",onClick:e.onCloseIndexTree},[n("img",{src:e.ButtonClose,alt:"close"},null,8,L)]),n("div",P,[(o(!0),l(x,null,h(e.allItems.children,t=>(o(),l("div",{key:t.id},[V(e.IndexTreeCard,{indexes:t},null,8,["indexes"])]))),128))])],2),W],2),n("div",{id:"IndexTree",class:_(["hidden md:block index-tree w-full",[e.isIndexTreeModalShow?"show z-10":e.isIndexTreeBtnViewFlg?"scroll":""]])},[n("button",{class:"pl-5 pt-1.5",onClick:s[0]||(s[0]=t=>e.onOpenIndexTree(!0))},[n("img",{src:e.ButtonIndex,alt:"インデックスツリー"},null,8,Y)])],2)],64)}const Z=b(K,[["render",$]]);export{Z as default};
